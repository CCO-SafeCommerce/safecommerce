<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="title_page">SafeCommerce | Servidor </title>

    <!-- Icon -->
    <link rel="icon" href="./assets/images/logo-icon.png">

    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>

    <!-- bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">

    <!-- style -->
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/servidores.css">
</head>

<body onresize="responsive()" onload="responsive(), validateSession()">

    <div id="wrapper">
        <div id="overlay">
        </div>
        <!-- barra lateral -->
        <my-sidebar></my-sidebar>
        <!-- Fim barra lateral  -->

        <!-- Barra de navegação -->
        <div id="page-content-wrapper">
            <div id="content">
                <div class="container-fluid p-0 px-lg-0 px-md-0">
                    <my-navbar></my-navbar>
                    <!-- Fim da barra de navegação -->

                    <!-- Conteudo da página -->
                    <div class="container-fluid px-lg-4">   
                        <div class="row">
                            <div class="col-md-12 mt-lg-4 mt-4">
                                <div class="d-sm-flex align-items-center justify-content-between mb-4">
                                    <h1 class="h3 mb-0 text-gray-800" id="server_title">Servidor</h1>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6 mb-4 card-size">
                                <div class="card border-left-primary shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs text-color font-weight-bold text-uppercase mb-1">
                                                    Sistema Operacional</div>
                                                <div class="h5 mb-0 font-weight-bold text-gray-800">valor</div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="bi bi-pc-display-horizontal"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6 mb-4 card-size">
                                <div class="card border-left-primary shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-uppercase mb-1">RAM</div>
                                                <div class="h5 mb-0 font-weight-bold text-gray-800">valor</div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="bi bi-memory"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6 mb-4 card-size">
                                <div class="card border-left-primary shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-uppercase mb-1">Disco</div>
                                                <div class="h5 mb-0 font-weight-bold text-gray-800">valor</div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="bi bi-disc"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6 mb-4 card-size">
                                <div class="card border-left-primary shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-uppercase mb-1">CPU'S</div>
                                                <div class="h5 mb-0 font-weight-bold text-gray-800">valor</div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="bi bi-cpu"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>



                        <!-- Tabelas de Métricas -->
                        <div class="accordion" id="accordionExample">

                            <!-- 1: Porcentagem de uso da CPU -->
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingOne">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                    Porcentagem de uso da CPU
                                    </button>
                                </h2>
                                <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                                    <div class="accordion-body bodyCanvas">
                                        <canvas id="cpuPercent" class="chartjs-render-monitor lineChart"></canvas>
                                    </div>
                                </div>
                            </div>

                            <!-- 2: Quantidade de CPU lógica 
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingTwo">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                    Quantidade de CPU lógica
                                    </button>
                                </h2>
                                <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                                    <div class="accordion-body bodyCanvas">
                                        <canvas id="qtdCpuLogic" class="chartjs-render-monitor lineChart"></canvas>
                                    </div>
                                </div>
                            </div>-->

                            <!-- 3: Porcentagem de uso da CPU por core -->
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingThree">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                    Porcentagem de uso da CPU por core
                                    </button>
                                </h2>
                                <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                                    <div class="accordion-body bodyCanvas">
                                        <canvas id="qtdCpuCore" class="chartjs-render-monitor lineChart"></canvas>
                                    </div>
                                </div>
                            </div>

                            <!-- 4: Frequência de uso da CPU -->
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingFour">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                    Frequência de uso da CPU
                                    </button>
                                </h2>
                                <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
                                    <div class="accordion-body bodyCanvas">
                                        <canvas id="frequencyCpu" class="chartjs-render-monitor lineChart"></canvas>
                                    </div>
                                </div>
                            </div>

                            <!-- 5: Total de Memória RAM
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingFive">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                                    Total de Memória RAM
                                    </button>
                                </h2>
                                <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#accordionExample">
                                    <div class="accordion-body bodyCanvas">
                                        <canvas id="ramMemory" class="chartjs-render-monitor lineChart"></canvas>
                                    </div>
                                </div>
                            </div> -->

                            <!-- 6: Porcentagem de uso da Memória RAM -->
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingSix">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
                                    Porcentagem de uso da Memória RAM
                                    </button>
                                </h2>
                                <div id="collapseSix" class="accordion-collapse collapse" aria-labelledby="headingSix" data-bs-parent="#accordionExample">
                                    <div class="accordion-body bodyCanvas">
                                        <canvas id="ramPercent" class="chartjs-render-monitorlineChart"></canvas>
                                    </div>
                                </div>
                            </div>

                            <!-- 7: Total de Disco 
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingSeven">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSeven" aria-expanded="false" aria-controls="collapseSeven">
                                    Total de Disco
                                    </button>
                                </h2>
                                <div id="collapseSeven" class="accordion-collapse collapse" aria-labelledby="headingSeven" data-bs-parent="#accordionExample">
                                    <div class="accordion-body bodyCanvas">
                                        <canvas id="disk" class="chartjs-render-monitorlineChart"></canvas>
                                    </div>
                                </div>
                            </div> -->

                            <!-- 8: Porcentagem de uso de Disco -->
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingEight">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEight" aria-expanded="false" aria-controls="collapseEight">
                                    Porcentagem de uso de Disco
                                    </button>
                                </h2>
                                <div id="collapseEight" class="accordion-collapse collapse" aria-labelledby="headingEight" data-bs-parent="#accordionExample">
                                    <div class="accordion-body bodyCanvas">
                                        <canvas id="diskPercent" class="chartjs-render-monitorlineChart"></canvas>
                                    </div>
                                </div>
                            </div>

                            <!-- 9: Lido pelo Disco -->
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingNine">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseNine" aria-expanded="false" aria-controls="collapseNine">
                                    Lido pelo Disco
                                    </button>
                                </h2>
                                <div id="collapseNine" class="accordion-collapse collapse" aria-labelledby="headingNine" data-bs-parent="#accordionExample">
                                    <div class="accordion-body bodyCanvas">
                                        <canvas id="diskRead" class="chartjs-render-monitorlineChart"></canvas>
                                    </div>
                                </div>
                            </div>

                            <!-- 10: Escrito pelo Disco -->
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingTen">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTen" aria-expanded="false" aria-controls="collapseTen">
                                        Escrito pelo Disco
                                    </button>
                                </h2>
                                <div id="collapseTen" class="accordion-collapse collapse" aria-labelledby="headingTen" data-bs-parent="#accordionExample">
                                    <div class="accordion-body bodyCanvas">    
                                        <canvas id="diskWrite" class="chartjs-render-monitorlineChart"></canvas>
                                    </div>
                                </div>
                            </div>

                        </div>








                        <div class="row">

                            <div class="col-xl-8 col-lg-7">
                                <div class="card shadow mb-4">
                                    <div
                                        class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                        <h6 class="m-0 font-weight-bold">Uso da CPU (%)</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="chart-area">
                                            <div class="chartjs-size-monitor">
                                                <div class="chartjs-size-monitor-expand">
                                                    <div></div>
                                                </div>
                                                <div class="chartjs-size-monitor-shrink">
                                                    <div></div>
                                                </div>
                                                <canvas id="CPULineChart" class="chartjs-render-monitor"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xl-4 col-lg-5">
                                <div class="card shadow mb-4">
                                    <div
                                        class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                        <h6 class="m-0 font-weight-bold">Memória em disco</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="chart-pie pt-4 pb-2">
                                            <div class="chartjs-size-monitor chart-size">
                                                <div class="chartjs-size-monitor-expand">
                                                    <div></div>
                                                </div>
                                                <div class="chartjs-size-monitor-shrink">
                                                    <div></div>
                                                </div>
                                                <center> <h4>Total de Memória em Disco: <span id="totalDisco"></span> </h4></center>
                                                <canvas id="CPUBarChart" class="chartjs-render-monitor"></canvas>
                                            </div>
                                            <div class="mt-4 text-center small">
                                                <span class="mr-2">
                                                    <i class="bi bi-circle-fill circle-size"></i>
                                                    Disponível
                                                </span>
                                                <span class="mr-2">
                                                    <i class="bi bi-circle-fill circle-size color-grey"></i>
                                                    Usado
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">

                            <div class="col-xl-8 col-lg-7">
                                <div class="card shadow mb-4">
                                    <div
                                        class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                        <h6 class="m-0 font-weight-bold">Uso da RAM (%)</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="chart-area">
                                            <div class="chartjs-size-monitor">
                                                <div class="chartjs-size-monitor-expand">
                                                    <div></div>
                                                </div>
                                                <div class="chartjs-size-monitor-shrink">
                                                    <div></div>
                                                </div>
                                                <canvas id="RAMLineChart" class="chartjs-render-monitor"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xl-4 col-lg-5">
                                <div class="card shadow mb-4">
                                    <div
                                        class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                        <h6 class="m-0 font-weight-bold">Memória RAM</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="chart-pie pt-4 pb-2">
                                            <div class="chartjs-size-monitor">
                                                <div class="chartjs-size-monitor-expand">
                                                    <div></div>
                                                </div>
                                                <div class="chartjs-size-monitor-shrink">
                                                    <div></div>
                                                </div>
                                                <center> <h4>Total de Memória Ram: <span id="totalRam"></span> </h4></center>
                                                <canvas id="RAMBarChart" class="chartjs-render-monitor"></canvas>
                                            </div>
                                            <div class="mt-4 text-center small">
                                                <span class="mr-2">
                                                    <i class="bi bi-circle-fill circle-size"></i>
                                                    Disponível
                                                </span>
                                                <span class="mr-2">
                                                    <i class="bi bi-circle-fill circle-size color-grey"></i>
                                                    Usado
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">

                            <div class="col-xl-8 col-lg-7">
                                <div class="card shadow mb-4">
                                    <div
                                        class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                        <h6 class="m-0 font-weight-bold">Temperatura CPU (%)</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="chart-area">
                                            <div class="chartjs-size-monitor">
                                                <div class="chartjs-size-monitor-expand">
                                                    <div></div>
                                                </div>
                                                <div class="chartjs-size-monitor-shrink">
                                                    <div></div>
                                                </div>
                                                <canvas id="TempLineChart" class="chartjs-render-monitor"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xl-4 col-lg-5">
                                <div class="card shadow mb-4">
                                    <div
                                        class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                        <h6 class="m-0 font-weight-bold">Termomêtro</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="chart-pie pt-4 pb-2">
                                            <div class="chartjs-size-monitor chart-size">
                                                <div class="chartjs-size-monitor-expand">
                                                    <div></div>
                                                </div>
                                                <div class="chartjs-size-monitor-shrink">
                                                    <div></div>
                                                </div>
                                                <canvas id="TempBarChart" class="chartjs-render-monitor"></canvas>
                                            </div>
                                            <div class="mt-4 text-center small">
                                                <span class="mr-2">
                                                    <i class="bi bi-circle-fill circle-size"></i>
                                                    Disponível
                                                </span>
                                                <span class="mr-2">
                                                    <i class="bi bi-circle-fill circle-size color-grey"></i>
                                                    Usado
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Fim do conteudo da página -->

                <!-- Footer -->
                <my-footer></my-footer>
            </div>
        </div>
    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="./js/main.js"></script>
<script src="./js/script.js"></script>

</html>
<script>

    const indexPage = false;

    document.getElementById('company_name').innerText = sessionStorage.NOME_USUARIO;

    function setPage() {
        var serverTitle = document.getElementById('server_title')
        var titlePage = document.getElementById('title_page')

        var modelServer = sessionStorage.MODEL_SERVER;

        serverTitle.innerText = modelServer;
        titlePage.innerHTML = `SafeCommerce | ${modelServer}`;
    }

    setPage()
    getData(indexPage);

    // Criando gráfico CPU
    var labels = [
    ];
    var dadosCPU = {
        labels: [],
        datasets: [
            {
                label: 'dados CPU',
                borderColor: '#dc3e1d',
                backgroundColor: '#dc3e1d',
                fill: true,
                data: []
            },
        ]
    };

    var config1 = {
        type: 'line',
        data: dadosCPU,
        options: {
            animation: {
                duration: 0
            },
            scales: {
                y: {
                    min: 0,
                    max: 100,
                }
            }
        }
    };

    const cpuPercent = new Chart(
        document.getElementById('cpuPercent'),
        config1
    );

    function CPUBarGraph() {
        const data = {
            datasets: [{
                label: 'My First Dataset',
                data: [40, 60],
                backgroundColor: [
                    '#808080',
                    '#dc3e1d',
                ],
                hoverOffset: 4
            }]
        };

        const config = {
            type: 'pie',
            data: data,
        };

        const CPUBarChart = new Chart(
            document.getElementById('CPUBarChart'),
            config
        );
    }

    // Criando gráfico de memória ram
        var labels = [];
        const dadosRam = {
            labels:[],
            datasets: [{
                label: 'RAM',
                backgroundColor: '#dc3e1d',
                borderColor: '#dc3e1d',
                data: [],
            }]
        };

        const config2 = {
            type: 'line',
            data: dadosRam,
            options: {
                animation: {
                duration: 0
            },
            scales: {
                y: {
                    min: 0,
                    max: 100,
                }
            }
            }
        };

        const RAMLineChart = new Chart(
            document.getElementById('RAMLineChart'),
            config2
        );
    

    // Criando gráfico de pizza do total de memoria ram
        const dadosRamBar = {
            datasets: [{
                label: 'Total de ram',
                data: [],
                backgroundColor: [
                    '#808080',
                    '#dc3e1d',
                ],
                hoverOffset: 4
            }]
        };

        const config3 = {
            type: 'pie',
            data: dadosRamBar,
        };

        const RAMBarChart = new Chart(
            document.getElementById('RAMBarChart'),
            config3
        );
    

    function TempLineGraph() {
        const labels = [
            '22:06',
            '22:07',
            '22:08',
            '22:09',
            '22:10',
            '22:11',
        ];

        const data = {
            labels: labels,
            datasets: [{
                label: 'CPU',
                backgroundColor: '#dc3e1d',
                borderColor: '#dc3e1d',
                data: [0, 10, 20, 40, 60, 80, 100],
            }]
        };

        const config = {
            type: 'line',
            data: data,
            options: {}
        };

        const TempLineChart = new Chart(
            document.getElementById('TempLineChart'),
            config
        );
    }

    function TempBarGraph() {
        const data = {
            datasets: [{
                label: 'My First Dataset',
                data: [40, 60],
                backgroundColor: [
                    '#808080',
                    '#dc3e1d',
                ],
                hoverOffset: 4
            }]
        };

        const config = {
            type: 'bar',
            data: data,
        };

        const TempBarChart = new Chart(
            document.getElementById('TempBarChart'),
            config
        );
    }

    function obterDadosCPU() {
        var varId = sessionStorage.ID_SERVER

        fetch(`/servers/obterDadosCPU`, {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                idServidor: varId,
            })

        }).then(function (response) {
            console.log(response)
            if (response.ok) {
                response.json().then(function (resposta) {
                    console.log(JSON.stringify(resposta));
                    console.log(resposta[0]);
                    console.log("peguei")
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                    resposta;
                    plotarGraficoCPU(resposta, cpuPercent);
                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });

    }

    function plotarGraficoCPU(resposta, grafico) {
        console.log('iniciando plotagem do gráfico...');
        console.log("ANTES DO IF" + resposta.length)
        if (grafico.data.datasets[0].data.length > 50 && grafico.data.labels.length > 50) {
            resposta = resposta.slice(-80)
            // grafico.data.datasets[0].data.slice(9);
            // grafico.data.labels.slice(9);
        }
        grafico.update()
        console.log("Depois do IF" + resposta.length)
        for (i = 0; i < resposta.length; i++) {

            if (grafico.data.datasets[0].data.length > 50 && grafico.data.labels.length > 50) {
                grafico.data.datasets[0].data.shift();
                grafico.data.labels.shift();
            }
            var dataN = new Date(resposta[i].horario)
            dataS = `${dataN.getHours()}:${dataN.getMinutes()}`
            grafico.data.datasets[0].data.push(resposta[i].porcentagemUso);
            grafico.data.labels.push(dataS);
        }
        cpuPercent.update()
    }

    function obterDadosRam() {
        var servers = JSON.parse(sessionStorage.SERVERS);

        var varId = servers[0].idServidor;

        fetch(`/servers/obterDadosRam`, {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                idServidor: varId,
            })

        }).then(function (response) {
            console.log(response)
            if (response.ok) {
                response.json().then(function (resposta) {
                    console.log(JSON.stringify(resposta));
                    console.log(resposta[0]);
                    console.log("peguei")
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                    resposta;
                    plotarGraficoRam(resposta, RAMLineChart);
                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });

    }
    
    function plotarGraficoRam(resposta, grafico) {
        console.log('iniciando plotagem do gráfico...');
        console.log("ANTES DO IF" + resposta.length)
        if (grafico.data.datasets[0].data.length > 30 && grafico.data.labels.length > 30) {
            resposta = resposta.slice(-30)
            // grafico.data.datasets[0].data.slice(9);
            // grafico.data.labels.slice(9);
        }
        grafico.update()
        console.log("Depois do IF" + resposta.length)
        for (i = 0; i < resposta.length; i++) {

            if (grafico.data.datasets[0].data.length > 30 && grafico.data.labels.length > 30) {
                grafico.data.datasets[0].data.shift();
                grafico.data.labels.shift();
            }
            var dataN = new Date(resposta[i].horario)
            dataS = `${dataN.getHours()}:${dataN.getMinutes()}`
            grafico.data.datasets[0].data.push(resposta[i].porcentagemUso);
            grafico.data.labels.push(dataS);
        }
        RAMLineChart.update()
    }

    obterDadosCPU()
    obterDadosRam()
    setInterval(() => { 
        obterDadosCPU()
        obterDadosRam()
    }, 5000)

</script>